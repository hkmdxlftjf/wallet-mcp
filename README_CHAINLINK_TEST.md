# Chainlink ä»·æ ¼æŸ¥è¯¢æµ‹è¯•ç¤ºä¾‹

è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ `wallet-mcp` é¡¹ç›®ä¸­çš„ Chainlink ä»·æ ¼æŸ¥è¯¢åŠŸèƒ½ã€‚

## åŠŸèƒ½è¯´æ˜

`get_token_price` æ–¹æ³•ç°åœ¨å…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š

1. **ä¼˜å…ˆæŸ¥è¯¢ Chainlink**: é¦–å…ˆå°è¯•ä» Chainlink çš„ä»·æ ¼ feeds è·å–ä»£å¸ä»·æ ¼
2. **è‡ªåŠ¨å›é€€æœºåˆ¶**: å¦‚æœ Chainlink æ²¡æœ‰å¯¹åº”çš„ feedï¼Œè‡ªåŠ¨å›é€€åˆ° Uniswap V3 æ± æŸ¥è¯¢
3. **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œç¡®ä¿æŸ¥è¯¢çš„ç¨³å®šæ€§

## è¿è¡Œæµ‹è¯•ç¤ºä¾‹

### 1. è®¾ç½®ç¯å¢ƒå˜é‡

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
ETH_RPC_URL=https://eth-mainnet.alchemyapi.io/v2/YOUR_API_KEY
```

æˆ–è€…ä½¿ç”¨å…¶ä»–ä»¥å¤ªåŠ RPC æä¾›å•†ï¼š
- Infura: `https://mainnet.infura.io/v3/YOUR_PROJECT_ID`
- QuickNode: `https://YOUR_ENDPOINT.quiknode.pro/YOUR_TOKEN/`
- Alchemy: `https://eth-mainnet.alchemyapi.io/v2/YOUR_API_KEY`

### 2. è¿è¡Œç¤ºä¾‹

```bash
cargo run --example chainlink_test
```

## æµ‹è¯•çš„ä»£å¸

ç¤ºä¾‹ä¼šæµ‹è¯•ä»¥ä¸‹ä»£å¸çš„ä»·æ ¼æŸ¥è¯¢ï¼š

1. **ETH (WETH)** - `0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2`
   - é€šå¸¸æœ‰ Chainlink ETH/USD feed
   
2. **WBTC** - `0x2260fac5e5542a773aa44fbcfedf7c193bc2c599`
   - é€šå¸¸æœ‰ Chainlink BTC/USD feed
   
3. **USDC** - `0xa0b86a33e6441e6c7d3e4c5b4b6b4b6b4b6b4b6b`
   - é€šå¸¸æœ‰ Chainlink USDC/USD feed
   
4. **UNI** - `0x1f9840a85d5af5bf1d1762f925bdaddc4201f984`
   - å¯èƒ½æ²¡æœ‰ Chainlink feedï¼Œç”¨äºæµ‹è¯•å›é€€æœºåˆ¶

## é¢„æœŸè¾“å‡º

```
ğŸ”— è¿æ¥åˆ°ä»¥å¤ªåŠä¸»ç½‘: https://eth-mainnet.alchemyapi.io/v2/YOUR_API_KEY
ğŸ“Š å¼€å§‹æµ‹è¯• Chainlink ä»·æ ¼æŸ¥è¯¢...

ğŸ” æŸ¥è¯¢ ETH ä»·æ ¼ (åœ°å€: 0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2)...
âœ… ETH ä»·æ ¼: 2345.67 USDT

ğŸ” æŸ¥è¯¢ WBTC ä»·æ ¼ (åœ°å€: 0x2260fac5e5542a773aa44fbcfedf7c193bc2c599)...
âœ… WBTC ä»·æ ¼: 43210.89 USDT

ğŸ” æŸ¥è¯¢ USDC ä»·æ ¼ (åœ°å€: 0xa0b86a33e6441e6c7d3e4c5b4b6b4b6b4b6b4b6b)...
âœ… USDC ä»·æ ¼: 1.00 USDT

ğŸ” æŸ¥è¯¢ UNI ä»·æ ¼ (åœ°å€: 0x1f9840a85d5af5bf1d1762f925bdaddc4201f984)...
âœ… UNI ä»·æ ¼: 12.34 USDT

ğŸ‰ æµ‹è¯•å®Œæˆï¼
```

## æŠ€æœ¯ç»†èŠ‚

### Chainlink ä»·æ ¼æŸ¥è¯¢æµç¨‹

1. **æ„å»º feed åœ°å€**: ä½¿ç”¨ `FeedRegistryInterface` æŸ¥è¯¢æŒ‡å®šä»£å¸å¯¹ USDT çš„ feed åœ°å€
2. **è·å–ä»·æ ¼æ•°æ®**: å¦‚æœæ‰¾åˆ° feedï¼Œè°ƒç”¨ `latestRoundData()` è·å–æœ€æ–°ä»·æ ¼
3. **ä»·æ ¼è½¬æ¢**: å°† Chainlink è¿”å›çš„ä»·æ ¼æ•°æ®è½¬æ¢ä¸ºå¯è¯»æ ¼å¼
4. **å›é€€æœºåˆ¶**: å¦‚æœ Chainlink æŸ¥è¯¢å¤±è´¥ï¼Œè‡ªåŠ¨ä½¿ç”¨ Uniswap V3 æŸ¥è¯¢

### é”™è¯¯å¤„ç†

- ç½‘ç»œè¿æ¥é”™è¯¯
- åˆçº¦è°ƒç”¨å¤±è´¥
- ä»·æ ¼æ•°æ®æ ¼å¼é”™è¯¯
- ä»£å¸åœ°å€æ— æ•ˆ

## æ³¨æ„äº‹é¡¹

1. **RPC é™åˆ¶**: ç¡®ä¿ä½ çš„ RPC æä¾›å•†æœ‰è¶³å¤Ÿçš„è¯·æ±‚é…é¢
2. **ç½‘ç»œå»¶è¿Ÿ**: ç¤ºä¾‹ä¸­æ·»åŠ äº† 1 ç§’å»¶è¿Ÿé¿å…è¯·æ±‚è¿‡äºé¢‘ç¹
3. **ä»£å¸åœ°å€**: ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ä»£å¸åˆçº¦åœ°å€
4. **ä¸»ç½‘æ•°æ®**: è¿™ä¸ªç¤ºä¾‹è¿æ¥åˆ°ä»¥å¤ªåŠä¸»ç½‘ï¼Œä½¿ç”¨çœŸå®çš„ä»·æ ¼æ•°æ®

## è‡ªå®šä¹‰æµ‹è¯•

ä½ å¯ä»¥ä¿®æ”¹ `examples/chainlink_test.rs` æ–‡ä»¶ä¸­çš„ `test_tokens` æ•°ç»„æ¥æµ‹è¯•å…¶ä»–ä»£å¸ï¼š

```rust
let test_tokens = vec![
    ("YOUR_TOKEN", "0xYOUR_TOKEN_ADDRESS"),
    // æ·»åŠ æ›´å¤šä»£å¸...
];
```